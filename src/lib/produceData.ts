// Import individual fruit data
import amlaFruit from './data/fruits/amla.json';
import appleFruit from './data/fruits/apple.json';
import avocadoFruit from './data/fruits/avocado.json';
import bananaFruit from './data/fruits/banana.json';
import berFruit from './data/fruits/ber.json';
import blackcurrantFruit from './data/fruits/blackcurrant.json';
import blueberryFruit from './data/fruits/blueberry.json';
import cherryFruit from './data/fruits/cherry.json';
import custardAppleFruit from './data/fruits/custard-apple.json';
import dragonFruitFruit from './data/fruits/dragon-fruit.json';
import figFruit from './data/fruits/fig.json';
import gooseberryFruit from './data/fruits/gooseberry.json';
import grapesFruit from './data/fruits/grapes.json';
import guavaFruit from './data/fruits/guava.json';
import jackfruitFruit from './data/fruits/jackfruit.json';
import jamunFruit from './data/fruits/jamun.json';
import karondaFruit from './data/fruits/karonda.json';
import kiwiFruit from './data/fruits/kiwi.json';
import kokumFruit from './data/fruits/kokum.json';
import langsatFruit from './data/fruits/langsat.json';
import lemonFruit from './data/fruits/lemon.json';
import longanFruit from './data/fruits/longan.json';
import loquatFruit from './data/fruits/loquat.json';
import lycheeFruit from './data/fruits/lychee.json';
import mangoFruit from './data/fruits/mango.json';
import mangosteenFruit from './data/fruits/mangosteen.json';
import mulberryFruit from './data/fruits/mulberry.json';
import muskmelonFruit from './data/fruits/muskmelon.json';
import noniFruit from './data/fruits/noni-fruit.json';
import orangeFruit from './data/fruits/orange.json';
import papayaFruit from './data/fruits/papaya.json';
import passionFruitFruit from './data/fruits/passion-fruit.json';
import peachFruit from './data/fruits/peach.json';
import pearFruit from './data/fruits/pear.json';
import persimmonFruit from './data/fruits/persimmon.json';
import pineappleFruit from './data/fruits/pineapple.json';
import plumFruit from './data/fruits/plum.json';
import pomegranateFruit from './data/fruits/pomegranate.json';
import rambutanFruit from './data/fruits/rambutan.json';
import raspberryFruit from './data/fruits/raspberry.json';
import roseAppleFruit from './data/fruits/rose-apple.json';
import sapotaFruit from './data/fruits/sapota.json'; // This is Chikoo
import starfruitFruit from './data/fruits/starfruit.json';
import strawberryFruit from './data/fruits/strawberry.json';
import surinamCherryFruit from './data/fruits/surinam-cherry.json';
import sweetLimeFruit from './data/fruits/sweet-lime.json';
import tamarindFruit from './data/fruits/tamarind.json';
import watermelonFruit from './data/fruits/watermelon.json';
import woodAppleFruit from './data/fruits/wood-apple.json';

// Import individual vegetable data
import amaranthLeavesVegetable from './data/vegetables/amaranth-leaves.json';
import arbiTaroRootVegetable from './data/vegetables/arbi-taro-root.json';
import ashGourdVegetable from './data/vegetables/ash-gourd.json';
import beetrootVegetable from './data/vegetables/beetroot.json';
import bitterGourdVegetable from './data/vegetables/bitter-gourd.json';
import bottleGourdVegetable from './data/vegetables/bottle-gourd.json';
import brinjalEggplantVegetable from './data/vegetables/brinjal-eggplant.json';
import broccoliVegetable from './data/vegetables/broccoli.json';
import cabbageVegetable from './data/vegetables/cabbage.json';
import capsicumVegetable from './data/vegetables/capsicum.json';
import carrotVegetable from './data/vegetables/carrot.json';
import cauliflowerVegetable from './data/vegetables/cauliflower.json';
import chilliesVegetable from './data/vegetables/chillies.json';
import clusterBeansVegetable from './data/vegetables/cluster-beans.json';
import corianderLeavesVegetable from './data/vegetables/coriander-leaves.json';
import cornVegetable from './data/vegetables/corn.json';
import cucumberVegetable from './data/vegetables/cucumber.json';
import curryLeavesVegetable from './data/vegetables/curry-leaves.json';
import dillLeavesVegetable from './data/vegetables/dill-leaves.json';
import drumstickMoringaVegetable from './data/vegetables/drumstick-moringa.json';
import elephantFootYamVegetable from './data/vegetables/elephant-foot-yam.json';
import fenugreekLeavesVegetable from './data/vegetables/fenugreek-leaves.json';
import frenchBeansVegetable from './data/vegetables/french-beans.json';
import garlicVegetable from './data/vegetables/garlic.json';
import gingerVegetable from './data/vegetables/ginger.json';
import greenGarlicVegetable from './data/vegetables/green-garlic.json';
import greenPeasVegetable from './data/vegetables/green-peas.json';
import ivyGourdVegetable from './data/vegetables/ivy-gourd.json';
import youngJackfruitVegetable from './data/vegetables/young-jackfruit.json';
import kaleVegetable from './data/vegetables/kale.json';
import kohlrabiVegetable from './data/vegetables/kohlrabi.json';
import ladyfingerOkraVegetable from './data/vegetables/ladyfinger-okra.json';
import lettuceVegetable from './data/vegetables/lettuce.json';
import lotusStemVegetable from './data/vegetables/lotus-stem.json';
import mintLeavesVegetable from './data/vegetables/mint-leaves.json';
import mustardGreensVegetable from './data/vegetables/mustard-greens.json';
import onionVegetable from './data/vegetables/onion.json';
import potatoVegetable from './data/vegetables/potato.json';
import pumpkinVegetable from './data/vegetables/pumpkin.json';
import radishVegetable from './data/vegetables/radish.json';
import rawBananaVegetable from './data/vegetables/raw-banana.json';
import rawMangoVegetable from './data/vegetables/raw-mango.json';
import ridgeGourdVegetable from './data/vegetables/ridge-gourd.json';
import snakeGourdVegetable from './data/vegetables/snake-gourd.json';
import spinachVegetable from './data/vegetables/spinach.json';
import springOnionVegetable from './data/vegetables/spring-onion.json';
import tindaAppleGourdVegetable from './data/vegetables/tinda-apple-gourd.json';
import tomatoVegetable from './data/vegetables/tomato.json';
import turnipVegetable from './data/vegetables/turnip.json';
import zucchiniVegetable from './data/vegetables/zucchini.json';

// Import beverage crops
import barleyBeverageCrop from './data/beverageCrops/barley.json';
import cocoaBeverageCrop from './data/beverageCrops/cocoa.json';
import coffeeBeverageCrop from './data/beverageCrops/coffee.json';
import hopsBeverageCrop from './data/beverageCrops/hops.json';
import sugarcaneBeverageCrop from './data/beverageCrops/sugarcane.json';
import teaBeverageCrop from './data/beverageCrops/tea.json';
import yerbaMateBeverageCrop from './data/beverageCrops/yerba_mate.json';

// Import cash crops
import cocoaCashCrop from './data/cashCrops/cocoa.json';
import coffeeCashCrop from './data/cashCrops/coffee.json';
import cottonCashCrop from './data/cashCrops/cotton.json';
import indigoCashCrop from './data/cashCrops/indigo.json';
import rubberCashCrop from './data/cashCrops/rubber.json';
import sugarcaneCashCrop from './data/cashCrops/sugarcane.json';
import teaCashCrop from './data/cashCrops/tea.json';
import tobaccoCashCrop from './data/cashCrops/tobacco.json';
import vanillaCashCrop from './data/cashCrops/vanilla.json';

// Import cereals and grains
import barleyCereal from './data/cerealsAndGrains/barley.json';
import buckwheatCereal from './data/cerealsAndGrains/buckwheat.json';
import maizeCereal from './data/cerealsAndGrains/maize.json';
import milletsCereal from './data/cerealsAndGrains/millets.json';
import oatsCereal from './data/cerealsAndGrains/oats.json';
import quinoaCereal from './data/cerealsAndGrains/quinoa.json';
import riceCereal from './data/cerealsAndGrains/rice.json';
import ryeCereal from './data/cerealsAndGrains/rye.json';
import sorghumCereal from './data/cerealsAndGrains/sorghum.json';
import teffCereal from './data/cerealsAndGrains/teff.json';
import wheatCereal from './data/cerealsAndGrains/wheat.json';

// Import fiber crops
import coirFiberCrop from './data/fiberCrops/coir.json';
import cottonFiberCrop from './data/fiberCrops/cotton.json';
import flaxFiberCrop from './data/fiberCrops/flax.json';
import hempFiberCrop from './data/fiberCrops/hemp.json';
import juteFiberCrop from './data/fiberCrops/jute.json';
import kenafFiberCrop from './data/fiberCrops/kenaf.json';
import ramieFiberCrop from './data/fiberCrops/ramie.json';
import sisalFiberCrop from './data/fiberCrops/sisal.json';

// Import fodder and forage crops
import alfalfaFodderCrop from './data/fodderAndForageCrops/alfalfa.json';
import cloverFodderCrop from './data/fodderAndForageCrops/clover.json';
import napierGrassFodderCrop from './data/fodderAndForageCrops/napier_grass.json';
import ryegrassFodderCrop from './data/fodderAndForageCrops/ryegrass.json';
import silageMaizeFodderCrop from './data/fodderAndForageCrops/silage_maize.json';
import sorghumSudanGrassHybridsFodderCrop from './data/fodderAndForageCrops/sorghum_sudan_grass_hybrids.json';

// Import herbs and spices
import basilHerbSpice from './data/herbsAndSpices/basil.json';
import bayLeafHerbSpice from './data/herbsAndSpices/bay_leaf.json';
import blackPepperHerbSpice from './data/herbsAndSpices/black_pepper.json';
import cardamomHerbSpice from './data/herbsAndSpices/cardamom.json';
import cilantroCorianderHerbSpice from './data/herbsAndSpices/cilantro_coriander.json';
import cinnamonHerbSpice from './data/herbsAndSpices/cinnamon.json';
import gingerHerbSpice from './data/herbsAndSpices/ginger.json';
import lemongrassHerbSpice from './data/herbsAndSpices/lemongrass.json';
import mintHerbSpice from './data/herbsAndSpices/mint.json';
import oreganoHerbSpice from './data/herbsAndSpices/oregano.json';
import parsleyHerbSpice from './data/herbsAndSpices/parsley.json';
import rosemaryHerbSpice from './data/herbsAndSpices/rosemary.json';
import saffronHerbSpice from './data/herbsAndSpices/saffron.json';
import thymeHerbSpice from './data/herbsAndSpices/thyme.json';
import turmericHerbSpice from './data/herbsAndSpices/turmeric.json';

// Import legumes and pulses
import blackGramLegume from './data/legumesAndPulses/black_gram.json';
import chickpeasLegume from './data/legumesAndPulses/chickpeas.json';
import cowpeasLegume from './data/legumesAndPulses/cowpeas.json';
import favaBeansLegume from './data/legumesAndPulses/fava_beans.json';
import greenGramLegume from './data/legumesAndPulses/green_gram.json';
import kidneyBeansLegume from './data/legumesAndPulses/kidney_beans.json';
import lentilsLegume from './data/legumesAndPulses/lentils.json';
import lupinsLegume from './data/legumesAndPulses/lupins.json';
import pigeonPeasLegume from './data/legumesAndPulses/pigeon_peas.json';
import soybeansLegume from './data/legumesAndPulses/soybeans.json';

// Import medicinal and aromatic plants
import aloeVeraMedicinalPlant from './data/medicinalAndAromaticPlants/aloe_vera.json';
import arjunaTreeMedicinalPlant from './data/medicinalAndAromaticPlants/arjuna_tree.json';
import ashwagandhaMedicinalPlant from './data/medicinalAndAromaticPlants/ashwagandha.json';
import brahmiMedicinalPlant from './data/medicinalAndAromaticPlants/brahmi.json';
import calendulaMedicinalPlant from './data/medicinalAndAromaticPlants/calendula.json';
import chamomileMedicinalPlant from './data/medicinalAndAromaticPlants/chamomile.json';
import eucalyptusMedicinalPlant from './data/medicinalAndAromaticPlants/eucalyptus.json';
import fenugreekMedicinalPlant from './data/medicinalAndAromaticPlants/fenugreek.json';
import ginsengMedicinalPlant from './data/medicinalAndAromaticPlants/ginseng.json';
import gotuKolaMedicinalPlant from './data/medicinalAndAromaticPlants/gotu_kola.json';
import lavenderMedicinalPlant from './data/medicinalAndAromaticPlants/lavender.json';
import moringaMedicinalPlant from './data/medicinalAndAromaticPlants/moringa.json';
import neemMedicinalPlant from './data/medicinalAndAromaticPlants/neem.json';
import tulsiMedicinalPlant from './data/medicinalAndAromaticPlants/tulsi.json';

// Import oil crops
import canolaOilCrop from './data/oilCrops/canola.json';
import castorOilCrop from './data/oilCrops/castor.json';
import coconutOilCrop from './data/oilCrops/coconut.json';
import flaxOilCrop from './data/oilCrops/flax.json';
import groundnutOilCrop from './data/oilCrops/groundnut.json';
import jatrophaOilCrop from './data/oilCrops/jatropha.json';
import mustardOilCrop from './data/oilCrops/mustard.json';
import oilPalmOilCrop from './data/oilCrops/oil_palm.json';
import sesameOilCrop from './data/oilCrops/sesame.json';
import soybeansOilCrop from './data/oilCrops/soybeans.json';
import sunflowerOilCrop from './data/oilCrops/sunflower.json';

// Import tuber and root crops
import arrowrootTuberCrop from './data/tuberAndRootCrops/arrowroot.json';
import beetrootTuberCrop from './data/tuberAndRootCrops/beetroot.json';
import cassavaTuberCrop from './data/tuberAndRootCrops/cassava.json';
import potatoTuberCrop from './data/tuberAndRootCrops/potato.json';
import radishTuberCrop from './data/tuberAndRootCrops/radish.json';
import sweetPotatoTuberCrop from './data/tuberAndRootCrops/sweet_potato.json';
import taroTuberCrop from './data/tuberAndRootCrops/taro.json';
import turnipTuberCrop from './data/tuberAndRootCrops/turnip.json';
import yamTuberCrop from './data/tuberAndRootCrops/yam.json';


export interface Recipe {
  name: string;
  description: string;
  ingredients: string[];
  steps: string[];
}
export interface ProduceInfo {
  id: string;
  commonName: string;
  scientificName: string;
  image: string;
  description: string;
  origin: string;
  localNames: string[];
  regions: string[];
  seasons: string[];
  nutrition?: { // Made optional as per processProduceItem logic
    calories: string;
    macronutrients: Array<{ name: string; value: number; unit: string }>;
    vitamins: Array<{ name: string; value: number; unit: string; rdi?: string }>;
    minerals: Array<{ name: string; value: number; unit: string; rdi?: string }>;
  };
  healthBenefits?: string[];
  potentialAllergies?: Array<{
    name: string;
    severity: 'Mild' | 'Moderate' | 'Severe' | 'Common' | 'Rare' | 'Varies' | 'Harmless' | 'Low' | 'Low to Moderate' | 'Moderate to High' | 'Very Low';
    details?: string;
  }>;
  cultivationProcess?: string;
  growthDuration?: string;
  sustainabilityTips?: string[];
  carbonFootprintInfo?: string;
  staticRecipes?: Recipe[];
  uses?: string[];
  originAndDomesticationHistory?: string;
  climaticRequirements?: { temperature: string; rainfall: string; altitude: string; };
  soilPreferences?: string;
  irrigationAndWaterNeeds?: string;
  plantingAndHarvestCycles?: string;
  pestAndDiseaseManagement?: string;
  postHarvestHandling?: string;
  majorProducingCountriesOrRegions?: string[];
  marketValueAndGlobalDemand?: string;
}

interface NutritionInfoRaw {
  calories: string;
  macronutrients: Array<{ name: string; value: string; unit: string }>;
  vitamins: Array<{ name: string; value: string; unit: string; rdi?: string }>;
  minerals: Array<{ name: string; value: string; unit: string; rdi?: string }>;
}

interface NutritionInfoProcessed {
  calories: string;
  macronutrients: Array<{ name: string; value: number; unit: string }>;
  vitamins: Array<{ name: string; value: number; unit: string; rdi?: string }>;
  minerals: Array<{ name: string; value: number; unit: string; rdi?: string }>;
}

// Helper function to convert string values to numbers
function convertNutritionValues(nutrition: NutritionInfoRaw | undefined): NutritionInfoProcessed | undefined {
  if (!nutrition) {
    return undefined;
  }
  return {
    ...nutrition,
    macronutrients: nutrition.macronutrients.map((item: any) => ({
      ...item,
      value: parseFloat(item.value) || 0
    })),
    vitamins: nutrition.vitamins.map((item: any) => ({
      ...item,
      value: parseFloat(item.value) || 0
    })),
    minerals: nutrition.minerals.map((item: any) => ({
      ...item,
      value: parseFloat(item.value) || 0
    }))
  };
}

function processProduceItem(rawItem: any): ProduceInfo {
  const processedNutrition = rawItem.nutrition ? convertNutritionValues(rawItem.nutrition as NutritionInfoRaw) : undefined;
  return {
    ...rawItem,
    nutrition: processedNutrition,
  } as ProduceInfo;
}

const fruits: ProduceInfo[] = [
  processProduceItem(amlaFruit),
  processProduceItem(appleFruit),
  processProduceItem(avocadoFruit),
  processProduceItem(bananaFruit),
  processProduceItem(berFruit),
  processProduceItem(blackcurrantFruit),
  processProduceItem(blueberryFruit),
  processProduceItem(cherryFruit),
  processProduceItem(custardAppleFruit),
  processProduceItem(dragonFruitFruit),
  processProduceItem(figFruit),
  processProduceItem(gooseberryFruit),
  processProduceItem(grapesFruit),
  processProduceItem(guavaFruit),
  processProduceItem(jackfruitFruit),
  processProduceItem(jamunFruit),
  processProduceItem(karondaFruit),
  processProduceItem(kiwiFruit),
  processProduceItem(kokumFruit),
  processProduceItem(langsatFruit),
  processProduceItem(lemonFruit),
  processProduceItem(longanFruit),
  processProduceItem(loquatFruit),
  processProduceItem(lycheeFruit),
  processProduceItem(mangoFruit),
  processProduceItem(mangosteenFruit),
  processProduceItem(mulberryFruit),
  processProduceItem(muskmelonFruit),
  processProduceItem(noniFruit),
  processProduceItem(orangeFruit),
  processProduceItem(papayaFruit),
  processProduceItem(passionFruitFruit),
  processProduceItem(peachFruit),
  processProduceItem(pearFruit),
  processProduceItem(persimmonFruit),
  processProduceItem(pineappleFruit),
  processProduceItem(plumFruit),
  processProduceItem(pomegranateFruit),
  processProduceItem(rambutanFruit),
  processProduceItem(raspberryFruit),
  processProduceItem(roseAppleFruit),
  processProduceItem(sapotaFruit),
  processProduceItem(starfruitFruit),
  processProduceItem(strawberryFruit),
  processProduceItem(surinamCherryFruit),
  processProduceItem(sweetLimeFruit),
  processProduceItem(tamarindFruit),
  processProduceItem(watermelonFruit),
  processProduceItem(woodAppleFruit),
];

const vegetables: ProduceInfo[] = [
  processProduceItem(amaranthLeavesVegetable),
  processProduceItem(arbiTaroRootVegetable),
  processProduceItem(ashGourdVegetable),
  processProduceItem(beetrootVegetable),
  processProduceItem(bitterGourdVegetable),
  processProduceItem(bottleGourdVegetable),
  processProduceItem(brinjalEggplantVegetable),
  processProduceItem(broccoliVegetable),
  processProduceItem(cabbageVegetable),
  processProduceItem(capsicumVegetable),
  processProduceItem(carrotVegetable),
  processProduceItem(cauliflowerVegetable),
  processProduceItem(chilliesVegetable),
  processProduceItem(clusterBeansVegetable),
  processProduceItem(corianderLeavesVegetable),
  processProduceItem(cornVegetable),
  processProduceItem(cucumberVegetable),
  processProduceItem(curryLeavesVegetable),
  processProduceItem(dillLeavesVegetable),
  processProduceItem(drumstickMoringaVegetable),
  processProduceItem(elephantFootYamVegetable),
  processProduceItem(fenugreekLeavesVegetable),
  processProduceItem(frenchBeansVegetable),
  processProduceItem(garlicVegetable),
  processProduceItem(gingerVegetable),
  processProduceItem(greenGarlicVegetable),
  processProduceItem(greenPeasVegetable),
  processProduceItem(ivyGourdVegetable),
  processProduceItem(youngJackfruitVegetable),
  processProduceItem(kaleVegetable),
  processProduceItem(kohlrabiVegetable),
  processProduceItem(ladyfingerOkraVegetable),
  processProduceItem(lettuceVegetable),
  processProduceItem(lotusStemVegetable),
  processProduceItem(mintLeavesVegetable),
  processProduceItem(mustardGreensVegetable),
  processProduceItem(onionVegetable),
  processProduceItem(potatoVegetable),
  processProduceItem(pumpkinVegetable),
  processProduceItem(radishVegetable),
  processProduceItem(rawBananaVegetable),
  processProduceItem(rawMangoVegetable),
  processProduceItem(ridgeGourdVegetable),
  processProduceItem(snakeGourdVegetable),
  processProduceItem(spinachVegetable),
  processProduceItem(springOnionVegetable),
  processProduceItem(tindaAppleGourdVegetable),
  processProduceItem(tomatoVegetable),
  processProduceItem(turnipVegetable),
  processProduceItem(zucchiniVegetable),
];

const beverageCrops: ProduceInfo[] = [
  processProduceItem(barleyBeverageCrop),
  processProduceItem(cocoaBeverageCrop),
  processProduceItem(coffeeBeverageCrop),
  processProduceItem(hopsBeverageCrop),
  processProduceItem(sugarcaneBeverageCrop),
  processProduceItem(teaBeverageCrop),
  processProduceItem(yerbaMateBeverageCrop),
];

const cashCrops: ProduceInfo[] = [
  processProduceItem(cocoaCashCrop),
  processProduceItem(coffeeCashCrop),
  processProduceItem(cottonCashCrop),
  processProduceItem(indigoCashCrop),
  processProduceItem(rubberCashCrop),
  processProduceItem(sugarcaneCashCrop),
  processProduceItem(teaCashCrop),
  processProduceItem(tobaccoCashCrop),
  processProduceItem(vanillaCashCrop),
];

const cerealsAndGrains: ProduceInfo[] = [
  processProduceItem(barleyCereal),
  processProduceItem(buckwheatCereal),
  processProduceItem(maizeCereal),
  processProduceItem(milletsCereal),
  processProduceItem(oatsCereal),
  processProduceItem(quinoaCereal),
  processProduceItem(riceCereal),
  processProduceItem(ryeCereal),
  processProduceItem(sorghumCereal),
  processProduceItem(teffCereal),
  processProduceItem(wheatCereal),
];

const fiberCrops: ProduceInfo[] = [
  processProduceItem(coirFiberCrop),
  processProduceItem(cottonFiberCrop),
  processProduceItem(flaxFiberCrop),
  processProduceItem(hempFiberCrop),
  processProduceItem(juteFiberCrop),
  processProduceItem(kenafFiberCrop),
  processProduceItem(ramieFiberCrop),
  processProduceItem(sisalFiberCrop),
];

const fodderAndForageCrops: ProduceInfo[] = [
  processProduceItem(alfalfaFodderCrop),
  processProduceItem(cloverFodderCrop),
  processProduceItem(napierGrassFodderCrop),
  processProduceItem(ryegrassFodderCrop),
  processProduceItem(silageMaizeFodderCrop),
  processProduceItem(sorghumSudanGrassHybridsFodderCrop),
];

const herbsAndSpices: ProduceInfo[] = [
  processProduceItem(basilHerbSpice),
  processProduceItem(bayLeafHerbSpice),
  processProduceItem(blackPepperHerbSpice),
  processProduceItem(cardamomHerbSpice),
  processProduceItem(cilantroCorianderHerbSpice),
  processProduceItem(cinnamonHerbSpice),
  processProduceItem(gingerHerbSpice),
  processProduceItem(lemongrassHerbSpice),
  processProduceItem(mintHerbSpice),
  processProduceItem(oreganoHerbSpice),
  processProduceItem(parsleyHerbSpice),
  processProduceItem(rosemaryHerbSpice),
  processProduceItem(saffronHerbSpice),
  processProduceItem(thymeHerbSpice),
  processProduceItem(turmericHerbSpice),
];

const legumesAndPulses: ProduceInfo[] = [
  processProduceItem(blackGramLegume),
  processProduceItem(chickpeasLegume),
  processProduceItem(cowpeasLegume),
  processProduceItem(favaBeansLegume),
  processProduceItem(greenGramLegume),
  processProduceItem(kidneyBeansLegume),
  processProduceItem(lentilsLegume),
  processProduceItem(lupinsLegume),
  processProduceItem(pigeonPeasLegume),
  processProduceItem(soybeansLegume),
];

const medicinalAndAromaticPlants: ProduceInfo[] = [
  processProduceItem(aloeVeraMedicinalPlant),
  processProduceItem(arjunaTreeMedicinalPlant),
  processProduceItem(ashwagandhaMedicinalPlant),
  processProduceItem(brahmiMedicinalPlant),
  processProduceItem(calendulaMedicinalPlant),
  processProduceItem(chamomileMedicinalPlant),
  processProduceItem(eucalyptusMedicinalPlant),
  processProduceItem(fenugreekMedicinalPlant),
  processProduceItem(ginsengMedicinalPlant),
  processProduceItem(gotuKolaMedicinalPlant),
  processProduceItem(lavenderMedicinalPlant),
  processProduceItem(moringaMedicinalPlant),
  processProduceItem(neemMedicinalPlant),
  processProduceItem(tulsiMedicinalPlant),
];

const oilCrops: ProduceInfo[] = [
  processProduceItem(canolaOilCrop),
  processProduceItem(castorOilCrop),
  processProduceItem(coconutOilCrop),
  processProduceItem(flaxOilCrop),
  processProduceItem(groundnutOilCrop),
  processProduceItem(jatrophaOilCrop),
  processProduceItem(mustardOilCrop),
  processProduceItem(oilPalmOilCrop),
  processProduceItem(sesameOilCrop),
  processProduceItem(soybeansOilCrop),
  processProduceItem(sunflowerOilCrop),
];

const tuberAndRootCrops: ProduceInfo[] = [
  processProduceItem(arrowrootTuberCrop),
  processProduceItem(beetrootTuberCrop),
  processProduceItem(cassavaTuberCrop),
  processProduceItem(potatoTuberCrop),
  processProduceItem(radishTuberCrop),
  processProduceItem(sweetPotatoTuberCrop),
  processProduceItem(taroTuberCrop),
  processProduceItem(turnipTuberCrop),
  processProduceItem(yamTuberCrop),
];

const allProduceData: ProduceInfo[] = [
  ...fruits,
  ...vegetables,
  ...beverageCrops,
  ...cashCrops,
  ...cerealsAndGrains,
  ...fiberCrops,
  ...fodderAndForageCrops,
  ...herbsAndSpices,
  ...legumesAndPulses,
  ...medicinalAndAromaticPlants,
  ...oilCrops,
  ...tuberAndRootCrops,
];

export function getProduceByCommonName(name: string): ProduceInfo | undefined {
  const searchTerm = name.toLowerCase();
  return allProduceData.find(p => p.commonName.toLowerCase() === searchTerm || p.id.toLowerCase() === searchTerm);
}

export function searchProduce(
  query: string,
  filters: { region?: string; season?: string } = {}
): ProduceInfo[] {
  const searchTerm = query.toLowerCase().trim();
  let results = allProduceData;

  if (searchTerm) {
    results = results.filter(p =>
      p.commonName.toLowerCase().includes(searchTerm) ||
      p.scientificName.toLowerCase().includes(searchTerm) ||
      (p.localNames && p.localNames.some(ln => ln.toLowerCase().includes(searchTerm))) ||
      p.description.toLowerCase().includes(searchTerm)
    );
  }

  if (filters.region && filters.region !== 'all') {
    results = results.filter(p => p.regions.includes(filters.region!));
  }

  if (filters.season && filters.season !== 'all') {
    results = results.filter(p => p.seasons.includes(filters.season!));
  }

  return results;
}

export function getAllProduce(): ProduceInfo[] {
  return allProduceData;
}

export function getUniqueRegions(): string[] {
  const allRegions = allProduceData.flatMap(p => p.regions || []);
  return Array.from(new Set(allRegions)).sort();
}

export function getUniqueSeasons(): string[] {
  const allSeasons = allProduceData.flatMap(p => p.seasons || []);
  return Array.from(new Set(allSeasons)).sort();
}

function getCurrentSeasonName(): string {
  const month = new Date().getMonth(); // 0 (Jan) - 11 (Dec)
  if (month >= 2 && month <= 4) return 'Spring'; // Mar, Apr, May
  if (month >= 5 && month <= 7) return 'Summer'; // Jun, Jul, Aug
  if (month >= 8 && month <= 10) return 'Autumn'; // Sep, Oct, Nov
  return 'Winter'; // Dec, Jan, Feb
}

export function getInSeasonProduce(limit?: number): ProduceInfo[] {
  const currentSeason = getCurrentSeasonName();
  const inSeasonItems = allProduceData.filter(produce =>
    produce.seasons && produce.seasons.includes(currentSeason)
  );

  if (limit && inSeasonItems.length > limit) {
    // Shuffle and slice if more items than limit
    for (let i = inSeasonItems.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [inSeasonItems[i], inSeasonItems[j]] = [inSeasonItems[j], inSeasonItems[i]];
    }
    return inSeasonItems.slice(0, limit);
  }
  if (limit) {
    return inSeasonItems.slice(0, limit); // Return up to limit if fewer items than limit
  }
  return inSeasonItems; // Return all if no limit or fewer items than limit
}

export function getAllCategoriesWithProduce(): { [categoryName: string]: ProduceInfo[] } {
  return {
    "Fruits": fruits,
    "Vegetables": vegetables,
    "Beverage Crops": beverageCrops,
    "Cash Crops": cashCrops,
    "Cereals & Grains": cerealsAndGrains,
    "Fiber Crops": fiberCrops,
    "Fodder & Forage Crops": fodderAndForageCrops,
    "Herbs & Spices": herbsAndSpices,
    "Legumes & Pulses": legumesAndPulses,
    "Medicinal & Aromatic Plants": medicinalAndAromaticPlants,
    "Oil Crops": oilCrops,
    "Tuber & Root Crops": tuberAndRootCrops,
  };
}

// The final export of 'produceData' is removed as allProduceData is now the primary source.
// The old 'produceData' only contained a subset and was inconsistently processed.
// If a specifically processed subset is needed elsewhere, it should be created from 'allProduceData'.
